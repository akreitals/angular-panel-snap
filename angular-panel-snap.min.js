!function(){"use strict";angular.module("akreitals.panel-snap",[])}(),function(){"use strict";function n(n,e){return{restrict:"EA",template:'<ul class="ak-menu"><li ng-repeat="panel in panels" ng-class="{active: panel.active}" ng-click="select(panel.id)"><a href>{{panel.name}}</a></li></ul>',scope:{"for":"@"},link:function(t){return angular.isDefined(t["for"])?(t.panels=[],n.$on("panelsnap:addedPanel",function(n,e){if(t["for"]===e.group){n.stopPropagation();var a={id:e.id,name:e.name,active:!1};t.panels.push(a)}}),n.$on("panelsnap:activatePanel",function(n,e){t["for"]===e.group&&(n.stopPropagation(),angular.forEach(t.panels,function(n){n.active=!1}),t.panels[e.id].active=!0)}),void(t.select=function(e){n.$emit("panelsnap:selectPanel",{group:t["for"],id:e})})):void e.error("PanelGroupMenu: no 'for' attribute provided")}}}angular.module("akreitals.panel-snap").directive("akPanelGroupMenu",n),n.$inject=["$rootScope","$log"]}(),function(){"use strict";function n(){return{restrict:"EA",replace:!0,controller:"PanelGroupController",scope:{name:"@",speed:"=",threshold:"=",fullWindow:"=",keyboard:"=",prevKey:"=",nextKey:"="},link:function(n){n.init()}}}function e(n,e,t,a,r,l,o){function i(){m.eventContainer.on("mousewheel scroll touchmove",c),angular.element(a).on("resize",u),n.keyboard&&angular.element(a).on("keydown",s)}function s(n){if(m.enabled)if(m.isSnapping){if(n.which===m.prevKey||n.which===m.nextKey)return n.preventDefault(),!1}else switch(n.which){case m.prevKey:n.preventDefault(),f(m.currentPanel-1);break;case m.nextKey:n.preventDefault(),f(m.currentPanel+1)}}function c(n){var e=50;r.cancel(v),v=r(function(){p(n)},e)}function u(){var n=150;r.cancel(h),h=r(function(){m.scrollInterval=isNaN(m.container[0].innerHeight)?m.container[0].clientHeight:m.container[0].innerHeight,m.enabled&&f(m.currentPanel)},n)}function p(n){if(n.stopPropagation(),!m.isSnapping){var e,t=m.snapContainer.scrollTop();if(!m.enabled)return e=Math.max(0,Math.min(Math.round(t/m.scrollInterval),m.panels.length-1)),void(e!==m.currentPanel&&d(e));var a=t-m.scrollOffset,r=m.container[0].scrollHeight-m.scrollInterval;e=a<-m.threshold&&a>-m.scrollInterval?Math.floor(t/m.scrollInterval):a>m.threshold&&a<m.scrollInterval?Math.ceil(t/m.scrollInterval):Math.round(t/m.scrollInterval),e=Math.max(0,Math.min(e,m.panels.length-1)),0===a||(0>=t||t>=r?(d(e),m.scrollOffset=0>=t?0:r):f(e))}}function f(e){if(!(isNaN(e)||0>e||e>=m.panels.length)){m.isSnapping=!0,o.$broadcast("panelsnap:start",{group:n.name}),m.panels[m.currentPanel].onLeave();var t=m.scrollInterval*e;m.snapContainer.scrollTo(0,t,m.speed).then(function(){m.scrollOffset=t,m.isSnapping=!1,o.$broadcast("panelsnap:finish",{group:n.name}),m.panels[e].onEnter(),d(e)})}}function d(e){!m.panels||m.panels.length<1||(angular.forEach(m.panels,function(n){n.setActive(!1)}),m.panels[e].setActive(!0),m.currentPanel=e,o.$broadcast("panelsnap:activate",{group:n.name}),o.$emit("panelsnap:activatePanel",{group:n.name,id:e}))}var h,v,m=this;m.panels=[],m.currentPanel=0,m.scrollInterval=0,m.scrollOffset=0,m.isSnapping=!1,m.enabled=!0,m.speed=400,m.threshold=50,m.prevKey=38,m.nextKey=40,m.addPanel=function(e){var t=angular.isDefined(e.name)?e.name:"Panel "+(m.panels.length+1);m.panels.push(e),angular.isDefined(n.name)&&o.$emit("panelsnap:addedPanel",{group:n.name,name:t,id:m.panels.length-1})},m.enableSnap=function(){m.enabled=!0},m.disableSnap=function(){m.enabled=!1},m.toggleSnap=function(){m.enabled=!m.enabled},m.snapTo=function(n){f(n)},n.init=function(){m.container=e,m.eventContainer=m.container,m.snapContainer=m.container,n.fullWindow&&(m.container=angular.element(l[0].documentElement),m.eventContainer=m.snapContainer=l),m.scrollInterval=isNaN(m.container[0].innerHeight)?m.container[0].clientHeight:m.container[0].innerHeight,m.speed=angular.isDefined(n.speed)?n.speed:m.speed,m.threshold=angular.isDefined(n.threshold)?n.threshold:m.threshold,m.prevKey=angular.isDefined(n.prevKey)?n.prevKey:m.prevKey,m.nextKey=angular.isDefined(n.nextKey)?n.nextKey:m.nextKey,i(),d(m.currentPanel)},o.$on("panelsnap:selectPanel",function(e,t){n.name===t.group&&(e.stopPropagation(),f(t.id))})}angular.module("akreitals.panel-snap").directive("akPanelGroup",n).controller("PanelGroupController",e),e.$inject=["$scope","$element","$attrs","$window","$timeout","$document","$rootScope"]}(),function(){"use strict";function n(){return{restrict:"EA",require:"^akPanelGroup",replace:!0,transclude:!0,scope:{name:"@",onEnter:"&",onLeave:"&"},template:'<div class="ak-panel" ng-class="{active: active}" ng-transclude></div>',link:function(n,e,t,a){a.addPanel(n),e.css({width:"100%",height:"100%",position:"relative",overflow:"hidden"}),n.enableSnap=a.enableSnap,n.disableSnap=a.disableSnap,n.toggleSnap=a.toggleSnap,n.snapTo=a.snapTo,n.active=!1,n.setActive=function(e){n.active=e}}}}angular.module("akreitals.panel-snap").directive("akPanel",n)}(),function(){"use strict";function n(n){return.5>n?Math.pow(2*n,2)/2:1-Math.pow(2*(1-n),2)/2}function e(n,e,t,a,r){var l=angular.element.prototype,o=function(n){return"undefined"!=typeof HTMLDocument&&n instanceof HTMLDocument||n.nodeType&&n.nodeType===n.DOCUMENT_NODE},i=function(n){return"undefined"!=typeof HTMLElement&&n instanceof HTMLElement||n.nodeType&&n.nodeType===n.ELEMENT_NODE},s=function(n){return i(n)||o(n)?n:n[0]};l.scrollTo=function(e,t,a){var r;if(angular.isElement(e)?r=this.scrollToElement:a&&(r=this.scrollToAnimated),r)return r.apply(this,arguments);var l=s(this);return o(l)?n.scrollTo(e,t):(l.scrollLeft=e,void(l.scrollTop=t))},l.scrollToAnimated=function(n,l,o,i){var s,c;o&&!i&&(i=r);var u=this.scrollLeft(),p=this.scrollTop(),f=Math.round(n-u),d=Math.round(l-p),h=null,v=this,m="scroll mousedown mousewheel touchmove keydown",g=function(n){(!n||n.which>0)&&(v.unbind(m,g),t(s),c.reject(),s=null)};if(s&&g(),c=e.defer(),!f&&!d)return c.resolve(),c.promise;var y=function(n){null===h&&(h=n);var e=n-h,t=e>=o?1:i(e/o);v.scrollTo(u+Math.ceil(f*t),p+Math.ceil(d*t)),1>t?s=a(y):(v.unbind(m,g),s=null,c.resolve())};return v.scrollTo(u,p),s=a(y),c.promise},l.scrollToElement=function(n,e,t,a){var r=s(this),l=this.scrollTop()+s(n).getBoundingClientRect().top-(e||0);return i(r)&&(l-=r.getBoundingClientRect().top),this.scrollTo(0,l,t,a)};var c={scrollLeft:function(e,t,a){if(angular.isNumber(e))return this.scrollTo(e,this.scrollTop(),t,a);var r=s(this);return o(r)?n.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft:r.scrollLeft},scrollTop:function(e,t,a){if(angular.isNumber(e))return this.scrollTo(this.scrollTop(),e,t,a);var r=s(this);return o(r)?n.scrollY||document.documentElement.scrollTop||document.body.scrollTop:r.scrollTop}},u=function(n,e){return function(t,a){return a?e.apply(this,arguments):n.apply(this,arguments)}};for(var p in c)l[p]=l[p]?u(l[p],c[p]):c[p]}function t(n){var e=["webkit","moz","o","ms"];return function(t,a){if(n[t])return n[t];for(var r,l=t.substr(0,1).toUpperCase()+t.substr(1),o=0;o<e.length;o++)if(r=e[o]+l,n[r])return n[r];return a}}function a(n,e){var t=0,a=function(n){var a=(new Date).getTime(),r=Math.max(0,16-(a-t)),l=e(function(){n(a+r)},r);return t=a+r,l};return n("requestAnimationFrame",a)}function r(n,e){var t=function(n){e.cancel(n)};return n("cancelAnimationFrame",t)}angular.module("akreitals.panel-snap").value("scrollEasing",n).run(e).factory("polyfill",t).factory("requestAnimation",a).factory("cancelAnimation",r),e.$inject=["$window","$q","cancelAnimation","requestAnimation","scrollEasing"],t.$inject=["$window"],a.$inject=["polyfill","$timeout"],r.$inject=["polyfill","$timeout"]}();
//# sourceMappingURL=angular-panel-snap.min.js.map
