!function(){"use strict";angular.module("panel-snap",[])}(),function(){"use strict";function n(n,e){return{restrict:"EA",template:'<ul class="ak-menu"><li ng-repeat="panel in panels" ng-class="{active: panel.active}" ng-click="select(panel.id)"><a href>{{panel.name}}</a></li></ul>',scope:{"for":"@"},link:function(t){return angular.isDefined(t["for"])?(t.panels=[],n.$on("panelsnap:addedPanel",function(n,e){if(t["for"]===e.group){n.stopPropagation();var a={id:e.id,name:e.name,active:!1};t.panels.push(a)}}),n.$on("panelsnap:activatePanel",function(n,e){t["for"]===e.group&&(n.stopPropagation(),angular.forEach(t.panels,function(n){n.active=!1}),t.panels[e.id].active=!0)}),void(t.select=function(e){n.$emit("panelsnap:selectPanel",{group:t["for"],id:e})})):void e.error("PanelGroupMenu: no 'for' attribute provided")}}}angular.module("panel-snap").directive("akPanelGroupMenu",n),n.$inject=["$rootScope","$log"]}(),function(){"use strict";function n(){return{restrict:"EA",replace:!0,controller:"PanelGroupController",scope:{name:"@",speed:"=",threshold:"=",fullWindow:"=",keyboard:"=",prevKey:"=",nextKey:"=",snap:"="},link:function(n){n.init()}}}function e(n,e,t,a,l,r,o){function i(){m.eventContainer.on("scroll.panelsnap",s),m.enabled&&m.eventContainer.on("mousewheel.panelsnap touchmove.panelsnap DOMMouseScroll.panelsnap",function(n){if(n.preventDefault(),m.isSnapping)return!1;if("mousewheel"===n.type||"DOMMouseScroll"===n.type){var e=Math.max(-1,Math.min(1,n.originalEvent.wheelDelta||-n.originalEvent.detail));e&&e>0?f(m.currentPanel-1):e&&f(m.currentPanel+1)}}),angular.element(a).on("resize.panelSnap",u),n.keyboard&&angular.element(a).on("keydown.panelSnap",c)}function c(n){if(m.enabled)if(m.isSnapping){if(n.which===m.prevKey||n.which===m.nextKey)return n.preventDefault(),!1}else switch(n.which){case m.prevKey:n.preventDefault(),f(m.currentPanel-1);break;case m.nextKey:n.preventDefault(),f(m.currentPanel+1)}}function s(n){var e=50;l.cancel(v),v=l(function(){p(n)},e)}function u(){var n=150;l.cancel(h),h=l(function(){m.scrollInterval=isNaN(m.container[0].innerHeight)?m.container[0].clientHeight:m.container[0].innerHeight,m.enabled&&f(m.currentPanel)},n)}function p(n){if(n.stopPropagation(),!m.isSnapping){var e,t=m.snapContainer.scrollTop();if(!m.enabled)return e=Math.max(0,Math.min(Math.round(t/m.scrollInterval),m.panels.length-1)),void(e!==m.currentPanel&&d(e));var a=t-m.scrollOffset,l=m.container[0].scrollHeight-m.scrollInterval;e=a<-m.threshold&&a>-m.scrollInterval?Math.floor(t/m.scrollInterval):a>m.threshold&&a<m.scrollInterval?Math.ceil(t/m.scrollInterval):Math.round(t/m.scrollInterval),e=Math.max(0,Math.min(e,m.panels.length-1)),0===a||(0>=t||t>=l?(d(e),m.scrollOffset=0>=t?0:l):f(e))}}function f(e){isNaN(e)||0>e||e>=m.panels.length||(m.isSnapping=!0,o.$broadcast("panelsnap:start",{group:n.name,id:e}),l(function(){m.panels[m.currentPanel].onLeave();var t=m.scrollInterval*e;m.snapContainer.scrollTo(0,t,m.speed).then(function(){m.scrollOffset=t,l(function(){m.isSnapping=!1},300),o.$broadcast("panelsnap:finish",{group:n.name,id:e}),m.panels[e].onEnter(),d(e)})},0))}function d(e){!m.panels||m.panels.length<1||(angular.forEach(m.panels,function(n){n.setActive(!1)}),m.panels[e].setActive(!0),m.currentPanel=e,o.$broadcast("panelsnap:activate",{group:n.name,id:e}),o.$emit("panelsnap:activatePanel",{group:n.name,id:e}))}var h,v,m=this;m.panels=[],m.currentPanel=0,m.scrollInterval=0,m.scrollOffset=0,m.isSnapping=!1,m.enabled=!0,m.speed=400,m.threshold=50,m.prevKey=38,m.nextKey=40,m.addPanel=function(e){var t=angular.isDefined(e.name)?e.name:"Panel "+(m.panels.length+1);m.panels.push(e),angular.isDefined(n.name)&&o.$emit("panelsnap:addedPanel",{group:n.name,name:t,id:m.panels.length-1})},m.enableSnap=function(){m.enabled=!0},m.disableSnap=function(){m.enabled=!1},m.toggleSnap=function(){m.enabled=!m.enabled},m.snapTo=function(n){f(n)},n.init=function(){m.container=e,m.eventContainer=m.container,m.snapContainer=m.container,n.fullWindow&&(m.container=angular.element(r[0].documentElement),m.eventContainer=m.snapContainer=r),m.scrollInterval=isNaN(m.container[0].innerHeight)?m.container[0].clientHeight:m.container[0].innerHeight,m.speed=angular.isDefined(n.speed)?n.speed:m.speed,m.threshold=angular.isDefined(n.threshold)?n.threshold:m.threshold,m.prevKey=angular.isDefined(n.prevKey)?n.prevKey:m.prevKey,m.nextKey=angular.isDefined(n.nextKey)?n.nextKey:m.nextKey,m.enabled=angular.isDefined(n.snap)?n.snap:m.enabled,i(),l(function(){d(m.currentPanel)},0)},o.$on("panelsnap:selectPanel",function(e,t){n.name===t.group&&(e.stopPropagation(),f(t.id))}),n.$on("$destroy",function(){angular.element(document).unbind(".panelsnap")})}angular.module("panel-snap").directive("akPanelGroup",n).controller("PanelGroupController",e),e.$inject=["$scope","$element","$attrs","$window","$timeout","$document","$rootScope"]}(),function(){"use strict";function n(){return{restrict:"EA",require:"^akPanelGroup",replace:!0,transclude:!0,scope:{name:"@",onEnter:"&",onLeave:"&"},template:'<div class="ak-panel" ng-class="{active: active}" ng-transclude></div>',link:function(n,e,t,a){a.addPanel(n),e.css({width:"100%",height:"100%",position:"relative"}),n.enableSnap=a.enableSnap,n.disableSnap=a.disableSnap,n.toggleSnap=a.toggleSnap,n.snapTo=a.snapTo,n.active=!1,n.setActive=function(e){n.active=e}}}}angular.module("panel-snap").directive("akPanel",n)}(),function(){"use strict";function n(n){return.5>n?Math.pow(2*n,2)/2:1-Math.pow(2*(1-n),2)/2}function e(n,e,t,a,l){var r=angular.element.prototype,o=function(n){return"undefined"!=typeof HTMLDocument&&n instanceof HTMLDocument||n.nodeType&&n.nodeType===n.DOCUMENT_NODE},i=function(n){return"undefined"!=typeof HTMLElement&&n instanceof HTMLElement||n.nodeType&&n.nodeType===n.ELEMENT_NODE},c=function(n){return i(n)||o(n)?n:n[0]};r.scrollTo=function(e,t,a){var l;if(angular.isElement(e)?l=this.scrollToElement:a&&(l=this.scrollToAnimated),l)return l.apply(this,arguments);var r=c(this);return o(r)?n.scrollTo(e,t):(r.scrollLeft=e,void(r.scrollTop=t))},r.scrollToAnimated=function(n,r,o,i){var c,s;o&&!i&&(i=l);var u=this.scrollLeft(),p=this.scrollTop(),f=Math.round(n-u),d=Math.round(r-p),h=null,v=this,m="scroll mousedown mousewheel touchmove keydown",g=function(n){(!n||n.which>0)&&(v.unbind(m,g),t(c),s.reject(),c=null)};if(c&&g(),s=e.defer(),!f&&!d)return s.resolve(),s.promise;var y=function(n){null===h&&(h=n);var e=n-h,t=e>=o?1:i(e/o);v.scrollTo(u+Math.ceil(f*t),p+Math.ceil(d*t)),1>t?c=a(y):(v.unbind(m,g),c=null,s.resolve())};return v.scrollTo(u,p),c=a(y),s.promise},r.scrollToElement=function(n,e,t,a){var l=c(this),r=this.scrollTop()+c(n).getBoundingClientRect().top-(e||0);return i(l)&&(r-=l.getBoundingClientRect().top),this.scrollTo(0,r,t,a)};var s={scrollLeft:function(e,t,a){if(angular.isNumber(e))return this.scrollTo(e,this.scrollTop(),t,a);var l=c(this);return o(l)?n.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft:l.scrollLeft},scrollTop:function(e,t,a){if(angular.isNumber(e))return this.scrollTo(this.scrollTop(),e,t,a);var l=c(this);return o(l)?n.scrollY||document.documentElement.scrollTop||document.body.scrollTop:l.scrollTop}},u=function(n,e){return function(t,a){return a?e.apply(this,arguments):n.apply(this,arguments)}};for(var p in s)r[p]=r[p]?u(r[p],s[p]):s[p]}function t(n){var e=["webkit","moz","o","ms"];return function(t,a){if(n[t])return n[t];for(var l,r=t.substr(0,1).toUpperCase()+t.substr(1),o=0;o<e.length;o++)if(l=e[o]+r,n[l])return n[l];return a}}function a(n,e){var t=0,a=function(n){var a=(new Date).getTime(),l=Math.max(0,16-(a-t)),r=e(function(){n(a+l)},l);return t=a+l,r};return n("requestAnimationFrame",a)}function l(n,e){var t=function(n){e.cancel(n)};return n("cancelAnimationFrame",t)}angular.module("panel-snap").value("scrollEasing",n).run(e).factory("polyfill",t).factory("requestAnimation",a).factory("cancelAnimation",l),e.$inject=["$window","$q","cancelAnimation","requestAnimation","scrollEasing"],t.$inject=["$window"],a.$inject=["polyfill","$timeout"],l.$inject=["polyfill","$timeout"]}();
//# sourceMappingURL=angular-panel-snap.min.js.map
